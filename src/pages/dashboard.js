import {React} from 'react';
import styled from "styled-components";
import Logo from "./Sanjivani.png";
import { ethers } from "ethers";
import { useNavigate } from 'react-router-dom';

export default function Login() {

  const contractAddress = '0x66a36E862560Ddb072b122b2908B6Ab17dF59C0C';
  const contractABI = [
    {
      "_format": "hh-sol-artifact-1",
      "contractName": "Certification",
      "sourceName": "contracts/Main.sol",
      "abi": [
        {
          "inputs": [],
          "stateMutability": "nonpayable",
          "type": "constructor"
        },
        {
          "anonymous": false,
          "inputs": [
            {
              "indexed": false,
              "internalType": "bytes32",
              "name": "_certificateId",
              "type": "bytes32"
            }
          ],
          "name": "certificateGenerated",
          "type": "event"
        },
        {
          "inputs": [
            {
              "internalType": "string",
              "name": "_id",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "_candidate_name",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "_org_name",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "_course_name",
              "type": "string"
            },
            {
              "internalType": "uint256",
              "name": "_expiration_year",
              "type": "uint256"
            }
          ],
          "name": "generateCertificate",
          "outputs": [],
          "stateMutability": "nonpayable",
          "type": "function"
        },
        {
          "inputs": [
            {
              "internalType": "string",
              "name": "_id",
              "type": "string"
            }
          ],
          "name": "getData",
          "outputs": [
            {
              "internalType": "string",
              "name": "",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "",
              "type": "string"
            },
            {
              "internalType": "uint256",
              "name": "",
              "type": "uint256"
            }
          ],
          "stateMutability": "view",
          "type": "function"
        }
      ],
      "bytecode": "0x608060405234801561001057600080fd5b50600080546001600160a01b0319163317905561083a806100326000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c8063ae55c8881461003b578063bc12f6eb14610067575b600080fd5b61004e61004936600461063f565b61007c565b60405161005e94939291906106c9565b60405180910390f35b61007a610075366004610714565b6102de565b005b606080606060008061008d866104e6565b90506000600160008381526020019081526020016000206040518060800160405290816000820180546100bf906107c9565b80601f01602080910402602001604051908101604052809291908181526020018280546100eb906107c9565b80156101385780601f1061010d57610100808354040283529160200191610138565b820191906000526020600020905b81548152906001019060200180831161011b57829003601f168201915b50505050508152602001600182018054610151906107c9565b80601f016020809104026020016040519081016040528092919081815260200182805461017d906107c9565b80156101ca5780601f1061019f576101008083540402835291602001916101ca565b820191906000526020600020905b8154815290600101906020018083116101ad57829003601f168201915b505050505081526020016002820180546101e3906107c9565b80601f016020809104026020016040519081016040528092919081815260200182805461020f906107c9565b801561025c5780601f106102315761010080835404028352916020019161025c565b820191906000526020600020905b81548152906001019060200180831161023f57829003601f168201915b5050505050815260200160038201548152505090508060600151600014156102bc5760405162461bcd60e51b815260206004820152600e60248201526d4e6f20646174612065786973747360901b60448201526064015b60405180910390fd5b8051602082015160408301516060909301519199909850919650945092505050565b6000546001600160a01b031633146103445760405162461bcd60e51b815260206004820152602360248201527f4f6e6c79204973737565722063616e2063616c6c20746869732066756e63746960448201526237b71760e91b60648201526084016102b3565b600061034f866104e6565b600081815260016020526040902060030154909150156103c25760405162461bcd60e51b815260206004820152602860248201527f4365727469666963617465207769746820676976656e20696420616c72656164604482015267792065786973747360c01b60648201526084016102b3565b6107e78210156104245760405162461bcd60e51b815260206004820152602760248201527f5468652065787069727920796561722073686f756c642062652032303233206f6044820152660373bb0b93239960cd1b60648201526084016102b3565b604080516080810182528681526020808201879052818301869052606082018590526000848152600182529290922081518051929391926104689284920190610503565b5060208281015180516104819260018501920190610503565b506040820151805161049d916002840191602090910190610503565b50606091909101516003909101556040518181527ff54e0f0055ffae318a21890316ed523f8a60aa59aaa279dfdcae7176155ec0db9060200160405180910390a1505050505050565b805160009082906104fa5750600092915050565b50506020015190565b82805461050f906107c9565b90600052602060002090601f0160209004810192826105315760008555610577565b82601f1061054a57805160ff1916838001178555610577565b82800160010185558215610577579182015b8281111561057757825182559160200191906001019061055c565b50610583929150610587565b5090565b5b808211156105835760008155600101610588565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126105c357600080fd5b813567ffffffffffffffff808211156105de576105de61059c565b604051601f8301601f19908116603f011681019082821181831017156106065761060661059c565b8160405283815286602085880101111561061f57600080fd5b836020870160208301376000602085830101528094505050505092915050565b60006020828403121561065157600080fd5b813567ffffffffffffffff81111561066857600080fd5b610674848285016105b2565b949350505050565b6000815180845260005b818110156106a257602081850181015186830182015201610686565b818111156106b4576000602083870101525b50601f01601f19169290920160200192915050565b6080815260006106dc608083018761067c565b82810360208401526106ee818761067c565b90508281036040840152610702818661067c565b91505082606083015295945050505050565b600080600080600060a0868803121561072c57600080fd5b853567ffffffffffffffff8082111561074457600080fd5b61075089838a016105b2565b9650602088013591508082111561076657600080fd5b61077289838a016105b2565b9550604088013591508082111561078857600080fd5b61079489838a016105b2565b945060608801359150808211156107aa57600080fd5b506107b7888289016105b2565b95989497509295608001359392505050565b600181811c908216806107dd57607f821691505b602082108114156107fe57634e487b7160e01b600052602260045260246000fd5b5091905056fea26469706673582212207f803ded4cb10431a0c68e70cb4f0cedd7ffa97a8bd23c0da7c4c298955f263564736f6c63430008090033",
      "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100365760003560e01c8063ae55c8881461003b578063bc12f6eb14610067575b600080fd5b61004e61004936600461063f565b61007c565b60405161005e94939291906106c9565b60405180910390f35b61007a610075366004610714565b6102de565b005b606080606060008061008d866104e6565b90506000600160008381526020019081526020016000206040518060800160405290816000820180546100bf906107c9565b80601f01602080910402602001604051908101604052809291908181526020018280546100eb906107c9565b80156101385780601f1061010d57610100808354040283529160200191610138565b820191906000526020600020905b81548152906001019060200180831161011b57829003601f168201915b50505050508152602001600182018054610151906107c9565b80601f016020809104026020016040519081016040528092919081815260200182805461017d906107c9565b80156101ca5780601f1061019f576101008083540402835291602001916101ca565b820191906000526020600020905b8154815290600101906020018083116101ad57829003601f168201915b505050505081526020016002820180546101e3906107c9565b80601f016020809104026020016040519081016040528092919081815260200182805461020f906107c9565b801561025c5780601f106102315761010080835404028352916020019161025c565b820191906000526020600020905b81548152906001019060200180831161023f57829003601f168201915b5050505050815260200160038201548152505090508060600151600014156102bc5760405162461bcd60e51b815260206004820152600e60248201526d4e6f20646174612065786973747360901b60448201526064015b60405180910390fd5b8051602082015160408301516060909301519199909850919650945092505050565b6000546001600160a01b031633146103445760405162461bcd60e51b815260206004820152602360248201527f4f6e6c79204973737565722063616e2063616c6c20746869732066756e63746960448201526237b71760e91b60648201526084016102b3565b600061034f866104e6565b600081815260016020526040902060030154909150156103c25760405162461bcd60e51b815260206004820152602860248201527f4365727469666963617465207769746820676976656e20696420616c72656164604482015267792065786973747360c01b60648201526084016102b3565b6107e78210156104245760405162461bcd60e51b815260206004820152602760248201527f5468652065787069727920796561722073686f756c642062652032303233206f6044820152660373bb0b93239960cd1b60648201526084016102b3565b604080516080810182528681526020808201879052818301869052606082018590526000848152600182529290922081518051929391926104689284920190610503565b5060208281015180516104819260018501920190610503565b506040820151805161049d916002840191602090910190610503565b50606091909101516003909101556040518181527ff54e0f0055ffae318a21890316ed523f8a60aa59aaa279dfdcae7176155ec0db9060200160405180910390a1505050505050565b805160009082906104fa5750600092915050565b50506020015190565b82805461050f906107c9565b90600052602060002090601f0160209004810192826105315760008555610577565b82601f1061054a57805160ff1916838001178555610577565b82800160010185558215610577579182015b8281111561057757825182559160200191906001019061055c565b50610583929150610587565b5090565b5b808211156105835760008155600101610588565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126105c357600080fd5b813567ffffffffffffffff808211156105de576105de61059c565b604051601f8301601f19908116603f011681019082821181831017156106065761060661059c565b8160405283815286602085880101111561061f57600080fd5b836020870160208301376000602085830101528094505050505092915050565b60006020828403121561065157600080fd5b813567ffffffffffffffff81111561066857600080fd5b610674848285016105b2565b949350505050565b6000815180845260005b818110156106a257602081850181015186830182015201610686565b818111156106b4576000602083870101525b50601f01601f19169290920160200192915050565b6080815260006106dc608083018761067c565b82810360208401526106ee818761067c565b90508281036040840152610702818661067c565b91505082606083015295945050505050565b600080600080600060a0868803121561072c57600080fd5b853567ffffffffffffffff8082111561074457600080fd5b61075089838a016105b2565b9650602088013591508082111561076657600080fd5b61077289838a016105b2565b9550604088013591508082111561078857600080fd5b61079489838a016105b2565b945060608801359150808211156107aa57600080fd5b506107b7888289016105b2565b95989497509295608001359392505050565b600181811c908216806107dd57607f821691505b602082108114156107fe57634e487b7160e01b600052602260045260246000fd5b5091905056fea26469706673582212207f803ded4cb10431a0c68e70cb4f0cedd7ffa97a8bd23c0da7c4c298955f263564736f6c63430008090033",
      "linkReferences": {},
      "deployedLinkReferences": {}
    }
    ];
    //const ethers = require('ethers');
  const provider = new ethers.providers.JsonRpcProvider('https://polygon-mumbai.infura.io/v3/35b5b5f38ace48d9a4db144f27c29ba0');
  const signer = provider.getSigner();
  
  const contract = new ethers.Contract(contractAddress,contractABI,signer);
 
  async function generateCertificate(id, candidateName, orgName, courseName, expirationYear) {
      const tx = await contract.generateCertificate(id, candidateName, orgName, courseName, expirationYear);
      const receipt = await tx.wait();
      console.log(receipt);
    }

  async function getData(id) {
      const data = await contract.getData(id);
      console.log(data);
    }
  const handleGenerateCertificate = async () => {
      await generateCertificate('iid', 'JohnDoe', 'ABCOrg', 'CourseName', 2023);
    }

  const handleGetData = async () => {
      await getData('id');
    }
  let navigate = useNavigate();
  return(
    <FormContainer> 
    <form action=''>
      <div className="brand">
      <img src={Logo} alt="Sanjivani.png"/>
        <h1>Welcome to SCOE Certificate Verification</h1>
      </div>
      <center>
        <h2>What you want to Generate?</h2>
      <button type="submit" onClick={() => {navigate('/register')}} >Certificate</button>
      <br/>
      <br/>
      <button onClick={handleGenerateCertificate}  >put data</button>
      <button onClick={handleGetData}>Get Data</button>

      </center>
    </form>
    </FormContainer> 

  );

}
const FormContainer = styled.div`
height: 100vh;
  width: 100vw;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 1rem;
  align-items: center;
  background-color: #131324;
  .brand {
    display: flex;
    align-items: center;
    gap: 1rem;
    justify-content: center;
    img {
      height: 5rem;
    }
    h1 {
      color: white;
      text-transform: uppercase;
    }
    
  }
  form {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    background-color: #00000076;
    border-radius: 2rem;
    padding: 3rem 5rem;
  }
  h2 {
    color: white;
    text-transform: uppercase;
  }
  button {
    background-color: #4e0eff;
    color: white;
    padding: 1rem 2rem;
    border: none;
    font-weight: bold;
    cursor: pointer;
    border-radius: 0.4rem;
    font-size: 1rem;
    text-transform: uppercase;
    &:hover {
      background-color: #4e0eff;
    }
  }
  span {
    color: white;
    text-transform: uppercase;
    a {
      color: #4e0eff;
      text-decoration: none;
      font-weight: bold;
    }
  }
`;
